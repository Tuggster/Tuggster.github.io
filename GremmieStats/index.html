<!DOCTYPE html>
<html>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <body>

    <h1>GremmieSealBot GremmieStats!</h1>
    <h2>GSB User stats</h2>
    <button type="button" name="getData" onclick="pullWebserverData()">get data!</button>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">

      var button = document.getElementById("getData");

      var createCORSRequest = function(method, url) {
        var xhr = new XMLHttpRequest();
        if ("withCredentials" in xhr) {
          // Most browsers.
          xhr.open(method, url, true);
        } else if (typeof XDomainRequest != "undefined") {
          // IE8 & IE9
          xhr = new XDomainRequest();
          xhr.open(method, url);
        } else {
          // CORS not supported.
          xhr = null;
        }
        return xhr;
      };

      function pullWebserverData(){
        var xhr = createCORSRequest('GET', 'http://18.220.203.155:3000/data');
        if (!xhr) {
          throw new Error('CORS not supported');
        }

        xhr.onload = function() {
         var responseText = xhr.responseText;
         buton.setAttribute('content', responseText);
        };

        xhr.send();
      }
    </script>

    <a href="../index.html">Want to go home?</a>

  </body>
</html>
